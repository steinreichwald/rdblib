language: python

python:
 - "3.4"
 - "3.5"
 - "3.6"
 - "3.7"
 - "pypy3"

install:
 # our "pillow" wheel for pypy3 was built (locally on Fedora 28) against
 # libjpeg.so.62 which is not available by default in shippable
 # (machine image v6.5.4 / Ubuntu 14.04).
 - apt-get update
 - apt-get install libjpeg62

 - pip install -r requirements.txt
 - pip install -r dev_requirements.txt
 - python setup.py develop

before_script:
 - mkdir -p shippable/testresults

script:
 - nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml

